// ====================================
// üìÅ ./public\index.html
// ====================================
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    

    <!-- INICIO - Importa√ß√£o da lib ALGOL WEB -------------------------------->
    <link id="theme-link" rel="stylesheet" href="css/algol-light.css">
    <script src="algol-web/scripts/variaveis.js" ></script>
    <script src="algol-web/scripts/bases/base_component.js" ></script>
    <script src="algol-web/scripts/bases/base_layout.js" ></script>
    <script src="algol-web/scripts/components/inputs.js" ></script>
    <script src="algol-web/scripts/components/buttons.js" ></script>
    <script src="algol-web/scripts/components/textarea.js" ></script>
    <script src="algol-web/scripts/components/select.js" ></script>
    <script src="algol-web/scripts/components/image.js" ></script>
    <script src="algol-web/scripts/components/spacer.js" ></script>
    <script src="algol-web/scripts/components/power_menu.js" ></script>
    <script src="algol-web/scripts/components/checkables.js" ></script>
    <script src="algol-web/scripts/layouts/grid-layout.js" ></script>
    <script src="algol-web/scripts/layouts/grid-item.js" ></script>
    <script src="algol-web/scripts/layouts/flex-item.js" ></script>
    <!-- FIM - Importa√ß√£o da lib ALGOL WEB ------------------------------------>
    
    <script src="js/index.js" defer></script>
    <script src="/js/pages/_base.js" defer></script>
    <script src="/js/pages/home.js" defer></script>
    <script src="/js/pages/posts.js" defer></script>
    <script src="/js/pages/publications.js" defer></script>
    <script src="/js/pages/courses.js" defer></script>
    <script src="/js/pages/404.js" defer></script>  
    <script src="/js/pages/single.js" defer></script>  
    <script src="/js/router.js" defer></script>
    <link rel="stylesheet" href="css/fonts.css">
    <style>
        #menu{
            font-family: 'Roboto Condensed Regular' !important;
        }
        @media(max-width: 1280px    ){
            #layout-screen{
                grid-template-columns: 1fr;
            }
        }
        .card-bg{
            background-color: var(--bg-card-A);
            box-shadow: 0 calc(0.1vw * var(--scale-factor)) calc(0.1vw * var(--scale-factor)) var(--bg-C);
        }
        #footer{
            background-color: #24272d;
            color: white;
            #ano{
                background-color: #222;
                text-align: center;
            }
            a{color: white; text-decoration: none;}
            a:hover{color: rgb(172, 190, 255);}
            a:active{color: rgb(97, 124, 222);}
        }

    </style>
</head>
<body>
    <algol-grid-layout id="layout-screen" posh="stretch" cols="0.1fr 0.8fr 0.1fr" colsbreak="1fr">
        <algol-grid-item></algol-grid-item>
        
        <!-- INICIO - PAGE CONTENT ---------------------------------------->
        <algol-grid-item id="page-content">        
            <algol-spacer value="1" valuebreak="3"></algol-spacer>

            <div id="spa-container">
                <!-- Contre√≠d-->
            </div>

            <!-- RODAP√â inserido dinamicamente aqui --------------------------->
            
        </algol-grid-item>
        <!-- INICIO - PAGE CONTENT ---------------------------------------->

        <algol-grid-item></algol-grid-item>
    </algol-grid-layout>
</body>
</html>

// ====================================
// üìÅ ./public\js\index.js
// ====================================
const IMAGE_BUCKET = 'http://localhost:8080'; // fazer com que este valor seja enviado pleo servidor no request da rota '/'

// insere dinamicamente o menu da p√°gina.
function createMenu(){
    const page_content = document.getElementById('page-content');
    page_content.insertAdjacentHTML('afterbegin',`
        <algol-power-menu id="menu"
            logo="${IMAGE_BUCKET}/imagens/structural-site/logo_h.svg"
            logoalt="logo"
            logolink="/"
            logowidth = 91
            logoheight = 100
            logosize = "12vw"
            logosizebreak = "30vw"
            >
            <li><a href="/" onclick="route(event)">HOME</a></li>
            <li><a href="/posts" onclick="route(event)">ARTIGOS</a></li>
            <li><a href="/publications" onclick="route(event)">PUBLICA√á√ïES</a></li>
            <li><a href="/courses" onclick="route(event)">CURSOS</a></li>
        </algol-power-menu>
    `);
}
function createFooter(){
    const page_content = document.getElementById('page-content');
    page_content.insertAdjacentHTML('beforeend',`
        <algol-grid-layout cols="1fr" id="footer">
            <algol-grid-item>
                <algol-spacer value="1.2"></algol-spacer>
                <algol-image size="12vw" sizebreak = "30vw" 
                    src="${IMAGE_BUCKET}/imagens/structural-site/logo_h_pb.svg" alt="logo" width="91" height="100">
                </algol-image>
            </algol-grid-item>
            <algol-flex-item posh="stretch">
                <algol-spacer value="1.2"></algol-spacer>
                    <a href="https://www.youtube.com/channel/UCVJGac_RO3I-yIM77xLYrdw" target="_blank">
                        <p>Inscreva-se&nbsp;</p>
                    </a>
                    <a href="https://www.youtube.com/channel/UCVJGac_RO3I-yIM77xLYrdw" target="_blank">
                        <algol-image size="1.6vw" sizebreak="5vw"
                            src="https://algol-bucket.b-cdn.net/imagens/structural-site/icon-youtube.svg" alt="logo" width="91" height="100">
                    </a>
            </algol-flex-item>
            <algol-flex-item>
                <algol-spacer value="1.2"></algol-spacer>   
                <p><a href="#">Termos de uso</a></p>
                <p>&nbsp;&nbsp;&nbsp;&nbsp;</p>
                <p><a href="#">Pol√≠tica de privarcidade</a></p>
                <algol-spacer value="1.2"></algol-spacer>
            </algol-flex-item>
            <algol-grid-item id="ano" padding="1.5vw 0" posh="stretch">
                <p>¬©20xx Algol.dev. Todos os direitos reservados.</p>
            </algol-grid-item>
        </algol-grid-layout>
    `);
}
createMenu();
createFooter();

// ====================================
// üìÅ ./public\js\pages\404 copy.js
// ====================================
const render404 = (container) => {
    container.innerHTML = `
        <h1>404 - P√°gina n√£o encontrada</h1>
    `;
};

// ====================================
// üìÅ ./public\js\pages\404.js
// ====================================

class Page404 extends PageBase{

    constructor(container) {
        super(container);
    }

    /** @override */
    render() {
        this.container.innerHTML = /* html */ `
            <h1>404 - P√°gina n√£o encontrada</h1>
        `;
    }

    /** @override */
    async loadData() {
        // nada para carregar
    }
}

// ====================================
// üìÅ ./public\js\pages\courses.js
// ====================================

class PageCourses extends PageBase{

    constructor(container) {
        super(container);
    }

    /** @override */
    render() {
        this.container.innerHTML = /* html */ `
            <algol-grid-layout posh="stretch" cols="1fr">
                <algol-grid-item
                img="${IMAGE_BUCKET}/imagens/structural-site/course-page-cover.webp"
                padding="15vw 5vw"
                paddingbreak="30vw 5vw"
                imgrepeat="no-repeat"
                imgsize="cover"
                imgpos="right"
                imgoverlay="0.6"
                posh="stretch">
                    <h2 style="text-align: center; color: white; text-shadow: 0 calc(0.1vw * var(--scale-factor)) calc(0.1vw * var(--scale-factor)) black;">Escolha o seu curso gratuito</h2>
                </algol-grid-item>

                <algol-grid-item>
                    <algol-spacer value="7" valuebreak="5"></algol-spacer>
                    <algol-grid-layout class="card-bg" posh="stretch" cols="0.3fr 0.7fr" colsbreak="1fr" gap="1vw">
                        <algol-grid-item>
                                <algol-image
                                size="100%"
                                radius="1vw"
                                expand src="${IMAGE_BUCKET}/imagens/cursos/programacao-basica/programacao-basica-basic-programming-01-cover.webp" alt="landscape" width="400" height="200"></algol-image>
                        </algol-grid-item>
                        <algol-grid-item padding="0 2vw" paddingbreak="5vw 3vw" posh="start">
                                <h2>Programa√ß√£o b√°sica - parte 01</h2>
                                <algol-spacer value="1.5"></algol-spacer>
                                <p>Comece com os conceitos b√°sicos de programa√ß√£o de computadores.</p>
                        </algol-grid-item>
                    </algol-grid-layout>
                </algol-grid-item>

                <algol-grid-item>
                    <algol-spacer value="7" valuebreak="5"></algol-spacer>
                    <algol-grid-layout class="card-bg" posh="stretch" cols="0.3fr 0.7fr" colsbreak="1fr" gap="1vw">
                        <algol-grid-item>
                                <algol-image
                                size="100%"
                                radius="1vw"
                                expand src="${IMAGE_BUCKET}/imagens/cursos/programacao-basica/programacao-basica-basic-programming-02-cover.webp" alt="landscape" width="400" height="200"></algol-image>
                        </algol-grid-item>
                        <algol-grid-item padding="0 2vw" paddingbreak="5vw 3vw" posh="start">
                                <h2>Programa√ß√£o b√°sica - parte 02</h2>
                                <algol-spacer value="1.5"></algol-spacer>
                                <p>Agora que voc√™ sabe o b√°sico da programa√ß√£o de computadores, vamos para os assuntos mais desafiadores</p>
                        </algol-grid-item>
                    </algol-grid-layout>
                </algol-grid-item>

                <algol-grid-item>
                    <algol-spacer value="7" valuebreak="5"></algol-spacer>
                    <algol-grid-layout class="card-bg" posh="stretch" cols="0.3fr 0.7fr" colsbreak="1fr" gap="1vw">
                        <algol-grid-item>
                                <algol-image
                                size="100%"
                                radius="1vw"
                                expand src="${IMAGE_BUCKET}/imagens/cursos/analise-de-algoritmos/algorithm-analysis-course.webp" alt="landscape" width="400" height="200"></algol-image>
                        </algol-grid-item>
                        <algol-grid-item padding="0 2vw" paddingbreak="5vw 3vw" posh="start">
                                <h2>An√°lise de algoritmos - parte 01</h2>
                                <algol-spacer value="1.5"></algol-spacer>
                                <p>Aprenda, de forma detalhada, a medir desempenho de algoritmos.</p>
                        </algol-grid-item>
                    </algol-grid-layout>
                    <algol-spacer value="7" valuebreak="5"></algol-spacer>
                </algol-grid-item>

            </algol-grid-layout>
        `;
    }

    /** @override */
    async loadData() {
        // nada para carregar
    }
}

// ====================================
// üìÅ ./public\js\pages\home.js
// ====================================

class PageHome extends PageBase{

    constructor(container) {
        super(container);
        this.dataCacheKey = 'dataCacheHome'; // cache de dados json, se houver
    }

    /** @override */
    render() {
        let cachedPostsHtml = null;// sessionStorage.getItem(this.dataCacheKey);

        const postsContent = cachedPostsHtml
            ? cachedPostsHtml
            : /* html */`
                <div id="posts-container">
                    <h2 style="text-align: center;">
                        Carregando conte√∫do...
                    </h2>
               </div>`;
               
        this.container.innerHTML = /* html */ `
            <algol-grid-layout posh="stretch" cols="1fr">
                <algol-grid-item
                img="${IMAGE_BUCKET}/imagens/structural-site/slide-img-01.webp"
                padding="22vw 5vw"
                paddingbreak="60vw 5vw 5vw 5vw"
                imgrepeat="no-repeat"
                imgsize="cover"
                imgpos="center"
                posh="stretch">
                    <h2 style="text-align: center; color: white; text-shadow: 0 calc(0.1vw * var(--scale-factor)) calc(0.1vw * var(--scale-factor)) black;">Computa√ß√£o e Tecnologia</h2>
                    <algol-spacer value="1.5"></algol-spacer>
                    <h3 style="text-align: center; color: white; text-shadow: 0 calc(0.1vw * var(--scale-factor)) calc(0.1vw * var(--scale-factor)) black;">Conte√∫dos did√°ticos com m√°xima riqueza de recursos visuais</h3>
                </algol-grid-item>

                <algol-grid-item>
                    <algol-spacer value="7" valuebreak="5"></algol-spacer>
                    <algol-grid-layout class="card-bg" posh="stretch" cols="0.3fr 0.7fr" colsbreak="1fr" gap="1vw">
                        <algol-grid-item>
                                <algol-image
                                size="100%"
                                radius="1vw"
                                expand src="${IMAGE_BUCKET}/imagens/cursos/programacao-basica/programacao-basica-basic-programming-01-cover.webp" alt="landscape" width="400" height="200"></algol-image>
                        </algol-grid-item>
                        <algol-grid-item padding="0 2vw" paddingbreak="5vw 3vw" posh="start">
                                <h2>Programa√ß√£o B√°sica</h2>
                                <algol-spacer value="1.5"></algol-spacer>
                                <p>Inicie agora o seu aprendizado no maravilhoso mundo da programa√ß√£o de computadores.</p>
                        </algol-grid-item>
                    </algol-grid-layout>
                </algol-grid-item>

                <algol-grid-item>
                    <algol-spacer value="7" valuebreak="8"></algol-spacer>
                    <h3 style="text-align: center;">Conhe√ßa nossos conte√∫dos na p√°gina de artigos.</h3>
                    <algol-spacer value="3"></algol-spacer>
                    
                    ${postsContent}
                    
                    <algol-spacer value="7" valuebreak="5"></algol-spacer>
                </algol-grid-item>
            </algol-grid-layout>
        `;

        if (!cachedPostsHtml)
            this.loadData();
    }

    /** @override */
    async loadData() {
        const div = document.getElementById('posts-container');
        if (!div) return;

        try {
            const response = await fetch('/api/recent-posts');
            const artigos = await response.json();
            
            let stringHtml = `<algol-grid-layout  class="card-bg" posh="stretch" cols="1fr 1fr 1fr" colsbreak="1fr 1fr" gap="1vw">`
            stringHtml += artigos.map(artigo => /* html */`
                <algol-grid-item padding="1vw">
                    <a href="${artigo.slug}" onclick="route(event)">
                        <algol-image radius="0.4vw" size="100%" src="${IMAGE_BUCKET}${artigo.featured_image_url}" alt="landscape" width="400" height="200"></algol-image>
                        <p style="text-align:center;">${artigo.title}</p>
                    </a>
                </algol-grid-item>
            `).join('');
            stringHtml += `</algol-grid-layout>`
            div.outerHTML = stringHtml; // substitui a div pelo <algol-grid-layout>
            sessionStorage.setItem(this.dataCacheKey, stringHtml); // salva no cache do sessionStorage para evitar recarregar do servidor

        } catch (error) {
            console.error("Erro ao carregar artigos:", error);
            div.innerHTML = "<p>Erro ao carregar conte√∫dos.</p>";
        }
    }

}

// ====================================
// üìÅ ./public\js\pages\posts copy.js
// ====================================
class PagePosts extends PageBase{

    constructor(container) {
        super(container);
        this.dataCacheKey = 'dataCachePosts'; // cache de dados json, se houver
    }

    /** @override */
    render() {
        let cachedPostsHtml = null; // sessionStorage.getItem(this.dataCacheKey);

        const postsContent = cachedPostsHtml
            ? cachedPostsHtml
            : /* html */`
                <div id="posts-container">
                    <h2 style="text-align: center;">
                        Carregando conte√∫do...
                    </h2>
               </div>`;
               
        this.container.innerHTML = /* html */ `
            <algol-grid-layout posh="stretch" cols="1fr">
                <algol-grid-item
                img="${IMAGE_BUCKET}/imagens/structural-site/articles-page-cover.webp"
                padding="15vw 5vw"
                paddingbreak="30vw 5vw"
                imgrepeat="no-repeat"
                imgsize="cover"
                imgpos="right"
                imgoverlay="0.6"
                posh="stretch">
                    <h2 style="text-align: center; color: white; text-shadow: 0 calc(0.1vw * var(--scale-factor)) calc(0.1vw * var(--scale-factor)) black;">Os mais variados assuntos sobre computa√ß√£o e tecnologia</h2>
                </algol-grid-item>
                
                <algol-grid-item>
                    <algol-spacer value="7" valuebreak="8"></algol-spacer>
                    
                    ${postsContent}
                    
                    <algol-spacer value="7" valuebreak="5"></algol-spacer>
                </algol-grid-item>

            </algol-grid-layout>
        `;

        if (!cachedPostsHtml)
            this.loadData();
    }

    /** @override */
    async loadData() {
        const div = document.getElementById('posts-container');
        if (!div) return;

        try {
            // Simula a demora
            await new Promise(resolve => setTimeout(resolve, 500));

            const response = await (await fetch('/_mocks/posts.json'));
            const artigos = await response.json();
            
            let stringHtml = `<algol-grid-layout  class="card-bg" posh="stretch" cols="1fr 1fr 1fr" colsbreak="1fr" gap="1vw" gapbreak="10vw">`
            stringHtml += artigos.map(artigo => /* html */`
                <algol-grid-item padding="1vw">
                    <algol-image radius="0.1vw" size="100%" src="${IMAGE_BUCKET}${artigo.featured_image_url}" alt="landscape" width="400" height="200"></algol-image>
                    <algol-grid-layout cols="1fr" color="white">
                        <algol-grid-item padding="1vw" paddingbreak="4vw">
                            <algol-spacer value="1"></algol-spacer>
                            <h3 style="text-align:left;">${artigo.title}</h3>
                            <algol-spacer value="1"></algol-spacer>
                            <p style="text-align:left;">${artigo.excerpt}</p>
                            <algol-spacer value="1"></algol-spacer>
                        </algol-grid-item>
                    </algol-grid-layout>
                </algol-grid-item>
            `).join('');
            stringHtml += `</algol-grid-layout>`
            div.outerHTML = stringHtml; // substitui a div pelo <algol-grid-layout>
            sessionStorage.setItem(this.dataCacheKey, stringHtml); // salva no cache do sessionStorage para evitar recarregar do servidor

        } catch (error) {
            console.error("Erro ao carregar artigos:", error);
            div.innerHTML = "<p>Erro ao carregar conte√∫dos.</p>";
        }
    }

}

// ====================================
// üìÅ ./public\js\pages\posts.js
// ====================================
class PagePosts extends PageBase{

    constructor(container) {
        super(container);
        this.dataCacheKey = 'dataCachePosts'; // cache de dados json, se houver
        // para pagina√ß√£o
        this.currentPage = 1;
        this.postsPerPage = 6;
        this.totalPages = 1;
        this.isLoading = false;
    }

    /** @override */
    render() {
        let cachedPostsHtml = null; // sessionStorage.getItem(this.dataCacheKey);

        const postsContent = cachedPostsHtml
            ? cachedPostsHtml
            : /* html */`
                <div id="posts-container">
                    <h2 style="text-align: center;">
                        Carregando conte√∫do...
                    </h2>
               </div>`;
               
        this.container.innerHTML = /* html */ `
            <algol-grid-layout posh="stretch" cols="1fr">
                <algol-grid-item
                img="${IMAGE_BUCKET}/imagens/structural-site/articles-page-cover.webp"
                padding="15vw 5vw"
                paddingbreak="30vw 5vw"
                imgrepeat="no-repeat"
                imgsize="cover"
                imgpos="right"
                imgoverlay="0.6"
                posh="stretch">
                    <h2 style="text-align: center; color: white; text-shadow: 0 calc(0.1vw * var(--scale-factor)) calc(0.1vw * var(--scale-factor)) black;">Os mais variados assuntos sobre computa√ß√£o e tecnologia</h2>
                </algol-grid-item>
                
                <algol-grid-item>
                    <algol-spacer value="7" valuebreak="8"></algol-spacer>
                    
                    <div id="posts-wrapper">
                        ${postsContent}
                    </div> 
                    <algol-spacer value="4"></algol-spacer>
                    <div id="pagination-container" style="display: flex; justify-content: center; align-items: center; gap: 0.5vw; flex-wrap: wrap;"></div>
                   
                    <algol-spacer value="7" valuebreak="5"></algol-spacer>
                </algol-grid-item>

            </algol-grid-layout>
        `;

        document.getElementById('pagination-container')?.addEventListener('click', (e) => {
            const btn = e.target.closest('algol-button');
            if (!btn || btn.hasAttribute('disabled')) return;
            
            const targetPage = parseInt(btn.getAttribute('data-page'));
            if (targetPage && targetPage !== this.currentPage) {
                this.goToPage(targetPage);
            }
        });

        if (!cachedPostsHtml)
            this.loadData(1);
        else
            this.loadData(1, true); // Se a p√°gina 1 veio do cache, renderiza apenas os bot√µes 
    }


    /** Muda a p√°gina e faz o scroll suave para o topo do conte√∫do */
    async goToPage(page) {
        this.currentPage = page;
        
        const wrapper = document.getElementById('posts-wrapper');
        if (wrapper) {
            wrapper.innerHTML = /* html */`<div style="display: flex; justify-content: center; width: 100%; padding: 5vw 0;"><h2>Carregando p√°gina ${page}...</h2></div>`;
            wrapper.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        await this.loadData(page);
}

    /** @override */
    async loadData(page = 1, isRebuildingPaginationOnly = false) {
        if (this.isLoading) return;
        this.isLoading = true;

        try {
            const response = await fetch('/api/simple-posts');
            const todosArtigos = await response.json();
            
            // Define o total de p√°ginas
            const totalItems = todosArtigos.length;
            this.totalPages = Math.ceil(totalItems / this.postsPerPage);

            if (!isRebuildingPaginationOnly) {
                // L√≥gica de pagina√ß√£o simulada (Offset e Limit)
                const offset = (page - 1) * this.postsPerPage;
                const artigosDaPagina = todosArtigos.slice(offset, offset + this.postsPerPage);

                let stringHtml = `<algol-grid-layout class="card-bg" posh="stretch" cols="1fr 1fr 1fr" colsbreak="1fr" gap="1vw" gapbreak="10vw" style="align-items: start;">`;
                
                stringHtml += artigosDaPagina.map(artigo => /* html */`
                    <algol-grid-item padding="1vw">
                        <algol-image radius="0.1vw" size="100%" src="${IMAGE_BUCKET}${artigo.featured_image_url}" alt="landscape" width="400" height="200"></algol-image>
                        <algol-grid-layout cols="1fr" color="white">
                            <algol-grid-item padding="1vw" paddingbreak="4vw">
                                <algol-spacer value="1"></algol-spacer>
                                <h3 style="text-align:left;">${artigo.title}</h3>
                                <algol-spacer value="1"></algol-spacer>
                                <p style="text-align:left;">${artigo.excerpt}</p>
                                <algol-spacer value="1"></algol-spacer>
                            </algol-grid-item>
                        </algol-grid-layout>
                    </algol-grid-item>
                `).join('');
                
                stringHtml += `</algol-grid-layout>`;

                const wrapper = document.getElementById('posts-wrapper');
                if (wrapper) wrapper.innerHTML = stringHtml;

                sessionStorage.setItem(this.dataCacheKey + page, stringHtml);
            }

            // Invoca a constru√ß√£o dos bot√µes na interface
            this.renderPaginationBar();

        } catch (error) {
            console.error("Erro ao carregar artigos:", error);
            const wrapper = document.getElementById('posts-wrapper');
            if (wrapper) wrapper.innerHTML = "<p>Erro ao carregar conte√∫dos.</p>";
        } finally {
            this.isLoading = false;
        }
    }

    /** Renderiza os bot√µes num√©ricos com suporte a elipses */
    renderPaginationBar() {
        const container = document.getElementById('pagination-container');
        if (!container) return; // guard
        
        if (this.totalPages <= 1) { // se n√£o houver p√°ginas
            container.innerHTML = '';
            return;
        }

        let html = '';

        if (this.currentPage > 1) { // se n√£o for a p√°gina 1
            html += `<algol-button data-page="${this.currentPage - 1}">&larr;</algol-button>`;
        }

        for (let i = 1; i <= this.totalPages; i++) {
            // Renderiza a primeira, a √∫ltima e as adjacentes √† atual
            if (i === 1 || i === this.totalPages || (i >= this.currentPage - 1 && i <= this.currentPage + 1)) {
                const isCurrent = (i === this.currentPage);
                const disabledState = isCurrent ? 'disabled' : '';
                
                html += `<algol-button data-page="${i}" ${disabledState}>${i}</algol-button>`;
            } 
            // Renderiza a elipse nos intervalos suprimidos
            else if (i === this.currentPage - 2 || i === this.currentPage + 2) {
                html += `<span style="font-weight: bold; padding: 0 0.5vw; color: var(--color-text, #555);">...</span>`;
            }
        }

        if (this.currentPage < this.totalPages) {
            html += `<algol-button data-page="${this.currentPage + 1}">&rarr;</algol-button>`;
        }

        container.innerHTML = html;
    }
}

// ====================================
// üìÅ ./public\js\pages\publications copy.js
// ====================================
const renderPublications = (container) => {
    container.innerHTML = `
        <algol-grid-layout posh="stretch" id="layout" cols="1fr 1fr 1fr" colsbreak="1fr" gap="1vw" class="algol-bubble-01">
            <algol-grid-item posh="start">   
                <algol-input-date name="input-date" id="input-date" label="input-date" placeholder="Digite aqui..." ></algol-input-date>
                <algol-input-date disabled required label="input-date" placeholder="Digite aqui..." ></algol-input-date>
            </algol-grid-item>
            <algol-grid-item posh="stretch">   
                <algol-input-time name="input-time" id="input-time" label="input-time" placeholder="Digite aqui..." ></algol-input-time>
                <algol-input-time disabled required label="input-time" placeholder="Digite aqui..." ></algol-input-time>
            </algol-grid-item>
            <algol-grid-item posh="end">
                <algol-input-range name="input-range" id="input-range" label="input-range" min=0.5 max="3" step="0.1"></algol-input-range>
                <algol-input-range disabled required label="input-range" ></algol-input-range>
            </algol-grid-item>
            <algol-flex-item distrib="between"> 
                <algol-input-color name="input-color" id="input-color" label="input-color" ></algol-input-color>
                <algol-input-color disabled required label="input-color" ></algol-input-color>
            </algol-flex-item>
        </algol-grid-layout>
    `;
};

// ====================================
// üìÅ ./public\js\pages\publications.js
// ====================================

    class PagePublications extends PageBase{

        constructor(container) {
            super(container);
        }

        /** @override */
        render() {
            this.container.innerHTML = /* html */ `
                <algol-grid-layout posh="stretch" cols="1fr">
                    <algol-grid-item
                    img="${IMAGE_BUCKET}/imagens/structural-site/books-page-cover.webp"
                    padding="15vw 5vw"
                    paddingbreak="30vw 5vw"
                    imgrepeat="no-repeat"
                    imgsize="cover"
                    imgpos="right"
                    imgoverlay="0.6"
                    posh="stretch">
                        <h2 style="text-align: center; color: white; text-shadow: 0 calc(0.1vw * var(--scale-factor)) calc(0.1vw * var(--scale-factor)) black;">Conhe√ßa as nossas publica√ß√µes</h2>
                    </algol-grid-item>
                    <algol-spacer value="7" valuebreak="5"></algol-spacer>

                </algol-grid-layout>

                <algol-grid-layout cols="1fr" color="white" gap="2vw">
                    <algol-grid-item padding="2vw 0">
                        <h2 style="text-align:center;">Game Dev Series vol.01:</h2>
                        <p style="text-align:center;">Fundamentos de algoritmos para jogos digitais (vers√£o Java).</p>
                        <algol-spacer value="1"></algol-spacer>
                    </algol-grid-item>

                    <algol-grid-item>
                        <algol-grid-layout cols="0.8fr 1.2fr" colsbreak="1fr" gap="2vw">
                            <algol-grid-item posh="end">
                                <algol-image
                                size="30vw"
                                sizebreak="100%"
                                expand src="imagens/publications/gds1/book-gds1-java.webp" alt="landscape" width="500" height="483"
                                ></algol-image>
                            </algol-grid-item>
                            
                            <algol-grid-item>
                                <algol-grid-layout cols="1fr" gap="2vw">
                                    <algol-grid-item>
                                        <p>Diferente de tudo o que voc√™ j√° leu sobre programa√ß√£o para jogos! Aprenda a criar jogos usando apenas c√≥digo de programa√ß√£o. Sem o uso de nenhuma Game Engine! Pensado nos m√≠nimos detalhes, o GDS1 (Game Dev Series vol.01) te fornece, em 12 cap√≠tulos recheados de conte√∫do, um passo a passo fant√°stico para voc√™ programar se divertindo.</p>
                                    </algol-grid-item>

                                    <algol-grid-item>
                                        <algol-grid-layout cols="1fr" colsbreak="0.4fr 0.6fr" gap="2vw">
                                            <algol-grid-item>
                                                <p style="text-align:right;">
                                                    ISBN: 978-65-00-07450-5
                                                    P√°ginas: 360
                                                    Ano de publica√ß√£o: 2020
                                                    Editora: Algol.dev
                                                </p>
                                            </algol-grid-item>
                                            <algol-grid-item>
                                                <algol-button color="#4b81ff" textcolor="white" id="btn-download-livro">Baixar o livro</algol-button>
                                                <algol-spacer value="1"></algol-spacer>
                                                <algol-button color="#f78a0d" textcolor="white" id="btn-download-arquivos">Baixar arquivos do livro</algol-button>
                                                <algol-spacer value="1"></algol-spacer>
                                                <algol-button color="#e7303f" textcolor="white" id="btn-testar">Testar jogo</algol-button>
                                            </algol-grid-item>    
                                        </algol-grid-layout>
                                        <algol-spacer value="1"></algol-spacer>

                                    </algol-grid-item>

                                </algol-grid-layout>
                            </algol-grid-item>
                        </algol-grid-layout>
                    </algol-grid-item>
                </algol-grid-layout>
                <algol-spacer value="7" valuebreak="5"></algol-spacer>
            `;

            this.injectStyle(`
                @media (max-width: ${MOBILE_BREAKPOINT}) {
                    #btn-testar{
                        display: none;
                    }
                }
            `);
        }

        /** @override */
        async loadData() {
            // nada para carregar
        }
    }

// ====================================
// üìÅ ./public\js\pages\single copy.js
// ====================================

class PageSingle extends PageBase{

    constructor(container) {
        super(container);
    }

    /** @override */
    render() {
        let cachedPostsHtml = null;// sessionStorage.getItem(this.dataCacheKey);

        const postsContent = cachedPostsHtml
            ? cachedPostsHtml
            : /* html */`
                <div id="single-container">
                    <h2 style="text-align: center;">
                        Carregando conte√∫do...
                    </h2>
               </div>`;
               
        this.container.innerHTML = `
            ${postsContent}
        `;

        this.injectStyle(/* css */`
             #single-container{
                background-color: white;
             }
            #single-container a:link{
                text-decoration: underline;
                color: var(--site_global_color)
            }
            #single-container a:hover {
                color: rgb(88, 38, 155);
            }
            
            #single-container a:visited {
                text-decoration: none;
                color: rgb(128, 128, 128);
            }

            #single-container h2{
               
            }
            #single-container h3{
            
            }
            #single-container p, #single-container ul, #single-container ol, #single-container table{
            
            }
            #single-container ul, #single-container ol{
                padding-left: 4vw;
            }
            #single-container ul{
                list-style-type: disc;
            }
            #single-container li{
                margin-bottom: 1vw;
            }
            #single-container hr{
                margin-bottom: 7vw;
                margin-top: 7vw;
                border: 0.2vw solid #ccc;
            }
            #single-container img{

            }

            /* classes para estiliza√ß√£o de tabelas */
            #single-container table{
                text-align: center;
                margin: auto;
            }
            #single-container table tr:nth-child(odd){background-color: #ddd;}
            #single-container table tr:nth-child(even){background-color: #eee;}
            #single-container table th, #single-container table td{padding: 1vw 2vw;}
            #single-container table th{
                background-color: #aaa;
                padding-bottom: 1vw;
                padding-top: 1vw;
            }
            #single-container table .blueHeader{
                background-color: rgb(80, 102, 148);
                color: white;
            }

            /* classes para estiliza√ß√£o de abas */
            #single-container .container-abas .abas {
                list-style: none; /* Remove os marcadores padr√£o */
                margin: 0;
                padding: 0;
                background-color: #f6f6f6;
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
            }
            #single-container .container-abas .abas .aba {
                text-decoration: none;
                text-align: center;
                color: #505050;
                background-color: #eee;
                border: 0.2vw #ddd solid;
                padding: 1vw;
                min-width: 6vw;
            }
            #single-container .container-abas .abas .aba.aba-ativa{
                color: #fff;
                background-color: var(--site_global_color);
                border-color:var(--site_global_color);
            }

            #single-container .container-abas .abas .aba:hover {
                background-color: #8a8a8a; /* Cor de fundo ao passar o mouse */
                color: #fff;
                border-color:#8a8a8a;
            }
            #single-container .container-abas .abas .aba.aba-ativa:hover {
                background-color: var(--site_global_color);
                border-color:var(--site_global_color);
            }

            #single-container .container-abas .conteudos {
                margin-top: 1vw; /* Espa√ßamento entre as abas e o conte√∫do */
                background-color: #f6f6f6;
            }
            #single-container .container-abas .conteudo {
                display: none; /* Oculta todas as abas por padr√£o */
            }
            #single-container .container-abas .conteudo.conteudo-ativo {
                display: block; /* mostra apenas a aba com a classe .ativo */
            }

            /* classes para textos descritivos */
            #single-container .description{
                font-style: italic;
                color: rgb(85, 85, 85);
                text-align: center;
            }

            /* classes para textos estilizados */
            #single-container p.stylized_01{
                font-weight: bold;
                font-size: 2vw;
            }

            /* classes para divs separadoras */
            #single-container .separator-1{
                height: 2vw;
            }
            #single-container .separator-2{
                height: 4vw;
            }
            #single-container .separator-3{
                height: 6vw;
            }
            #single-container .separator-4{
                height: 8vw;
            }
            #single-container .separator-5{
                height: 10vw;
            }

            /* classes para tamanhos de imagens */
            #single-container .full-size-img-mobile, #single-container .less-size-img-mobile, #single-container .half-size-img-mobile, #single-container .quarter-size-img-mobile, #single-container .eighth-size-img-mobile{
                width: unset;
            }
            #single-container .full-size-img{
                width: 100% !important;
            }
            #single-container .less-size-img{
                width: 75% !important;
            }
            #single-container .half-size-img{
                width: 50% !important;
            }
            #single-container .quarter-size-img{
                width: 25% !important;
            }
            #single-container .eighth-size-img{
                width: 12.5% !important;
            }

            /* classes para anima√ß√µes de lotties */
            #single-container .lottie-anim{
                margin: auto;
            }
            #single-container .lottie-size-80-desktop, #single-container .lottie-size-80{
                width: 80%;
            }
            #single-container .lottie-size-70-desktop, #single-container .lottie-size-70{
                width: 70%;
            }
            #single-container .lottie-size-60-desktop, #single-container .lottie-size-60{
                width: 60%;
            }
            #single-container .lottie-size-50-desktop, #single-container .lottie-size-50{
                width: 50%;
            }
            #single-container .lottie-size-40-desktop, #single-container .lottie-size-40{
                width: 40%;
            }
            #single-container .lottie-size-30-desktop, #single-container .lottie-size-30{
                width: 30%;
            }
            #single-container .lottie-size-20-desktop, #single-container .lottie-size-20{
                width: 20%;
            }

            /* classes utils */
            #single-container .hide-desktop{
                display: none;
            }

            #single-container .youtube-player {
                width: 100%;
                /* Or set a specific width */
                height: auto;
                aspect-ratio: 16 / 9;
                margin-bottom: 6vw;
                display: flex;
                justify-content: center;
                align-items: center;
                background-color: black;
            }
        `);

        if (!cachedPostsHtml)
            this.loadData();
    }

    /** @override */
    async loadData() {
        const div = document.getElementById('single-container');
        if (!div) return;

        try {
            // Simula a demora
            await new Promise(resolve => setTimeout(resolve, 500));

            const response = await (await fetch('/_mocks/single.json'));
            const artigo = await response.json();
            const content = this.processSingleContent(artigo.content); // faz substitui√ß√µes de tags marcadas no artigo

            let stringHtml = `
                <algol-grid-layout posh="stretch" cols="1fr">
                    <algol-grid-item
                    img="${IMAGE_BUCKET}${artigo.featured_image_url}"
                    padding="15vw 5vw"
                    paddingbreak="30vw 5vw"
                    imgrepeat="no-repeat"
                    imgsize="cover"
                    imgpos="right"
                    imgoverlay="0.6"
                    posh="stretch">
                        <h2 style="text-align: center; color: white; text-shadow: 0 calc(0.1vw * var(--scale-factor)) calc(0.1vw * var(--scale-factor)) black;">${artigo.title}</h2>
                        <algol-spacer value="1.5"></algol-spacer>
                        <p style="text-align: center; color: white;">${artigo.excerpt}</p>
                        <algol-spacer value="1.5"></algol-spacer>
                        <p style="text-align: center; color: white;">${artigo.date}</p>
                    </algol-grid-item>

                    <algol-grid-item id="single-container">
                        ${content}
                    </algol-grid-item>
                </algol-grid-layout>
            `;

            div.outerHTML = stringHtml; // substitui a div pelo <algol-grid-layout>

        } catch (error) {
            console.error("Erro ao carregar artigos:", error);
            div.innerHTML = "<p>Erro ao carregar conte√∫dos.</p>";
        }
    }

    processSingleContent(rawContent) {
        if (!rawContent) return '';

        // Substitui todas as ocorr√™ncias de [[[filebucket]]] pelo dom√≠nio das imagens
        let processedContent = rawContent.replaceAll('[[[filebucket]]]', IMAGE_BUCKET);
        // Substitui√ß√£o do Domain
        processedContent = processedContent.replaceAll('[[[domain]]]', window.location.origin);

        return processedContent;
    }

}

// ====================================
// üìÅ ./public\js\pages\single.js
// ====================================

class PageSingle extends PageBase{

    constructor(container) {
        super(container);
    }

    /** @override */
    render() {
        let cachedPostsHtml = null;// sessionStorage.getItem(this.dataCacheKey);

        const postsContent = cachedPostsHtml
            ? cachedPostsHtml
            : /* html */`
                <div id="single-container">
                    <h2 style="text-align: center;">
                        Carregando conte√∫do...
                    </h2>
               </div>`;
               
        this.container.innerHTML = `
            ${postsContent}
        `;

        this.injectStyle(/* css */`
            #single-container{
                background-color: white;
            }
            #single-container a:link{
                text-decoration: underline;
                color: var(--site_global_color)
            }
            #single-container a:hover {
                color: rgb(88, 38, 155);
            }
            
            #single-container a:visited {
                text-decoration: none;
                color: rgb(128, 128, 128);
            }

            #single-container h2{
               
            }
            #single-container h3{
            
            }
            #single-container p, #single-container ul, #single-container ol, #single-container table{
            
            }
            #single-container ul, #single-container ol{
                padding-left: 4vw;
            }
            #single-container ul{
                list-style-type: disc;
            }
            #single-container li{
                margin-bottom: 1vw;
            }
            #single-container hr{
                margin-bottom: 7vw;
                margin-top: 7vw;
                border: 0.2vw solid #ccc;
            }
            #single-container img{
                max-width: 100%;
                height: auto;
                margin: auto;
            }

            /* classes para estiliza√ß√£o de tabelas */
            #single-container table{
                text-align: center;
                margin: auto;
            }
            #single-container table tr:nth-child(odd){background-color: #ddd;}
            #single-container table tr:nth-child(even){background-color: #eee;}
            #single-container table th, #single-container table td{padding: 1vw 2vw;}
            #single-container table th{
                background-color: #aaa;
                padding-bottom: 1vw;
                padding-top: 1vw;
            }
            #single-container table .blueHeader{
                background-color: rgb(80, 102, 148);
                color: white;
            }

            /* classes para estiliza√ß√£o de abas */
            #single-container .container-abas .abas {
                list-style: none; /* Remove os marcadores padr√£o */
                margin: 0;
                padding: 0;
                background-color: #f6f6f6;
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
            }
            #single-container .container-abas .abas .aba {
                text-decoration: none;
                text-align: center;
                color: #505050;
                background-color: #eee;
                border: 0.2vw #ddd solid;
                padding: 1vw;
                min-width: 6vw;
            }
            #single-container .container-abas .abas .aba.aba-ativa{
                color: #fff;
                background-color: var(--site_global_color);
                border-color:var(--site_global_color);
            }

            #single-container .container-abas .abas .aba:hover {
                background-color: #8a8a8a; /* Cor de fundo ao passar o mouse */
                color: #fff;
                border-color:#8a8a8a;
            }
            #single-container .container-abas .abas .aba.aba-ativa:hover {
                background-color: var(--site_global_color);
                border-color:var(--site_global_color);
            }

            #single-container .container-abas .conteudos {
                margin-top: 1vw; /* Espa√ßamento entre as abas e o conte√∫do */
                background-color: #f6f6f6;
            }
            #single-container .container-abas .conteudo {
                display: none; /* Oculta todas as abas por padr√£o */
            }
            #single-container .container-abas .conteudo.conteudo-ativo {
                display: block; /* mostra apenas a aba com a classe .ativo */
            }

            /* classes para textos descritivos */
            #single-container .description{
                font-style: italic;
                color: rgb(85, 85, 85);
                text-align: center;
            }

            /* classes para textos estilizados */
            #single-container p.stylized_01{
                font-weight: bold;
                font-size: 2vw;
            }

            /* classes para divs separadoras */
            #single-container .separator-1{
                height: 2vw;
            }
            #single-container .separator-2{
                height: 4vw;
            }
            #single-container .separator-3{
                height: 6vw;
            }
            #single-container .separator-4{
                height: 8vw;
            }
            #single-container .separator-5{
                height: 10vw;
            }

            /* classes para tamanhos de imagens */
            #single-container .full-size-img-mobile, #single-container .less-size-img-mobile, #single-container .half-size-img-mobile, #single-container .quarter-size-img-mobile, #single-container .eighth-size-img-mobile{
                width: unset;
            }
            #single-container .full-size-img{
                width: 100% !important;
            }
            #single-container .less-size-img{
                width: 75% !important;
            }
            #single-container .half-size-img{
                width: 50% !important;
            }
            #single-container .quarter-size-img{
                width: 25% !important;
            }
            #single-container .eighth-size-img{
                width: 12.5% !important;
            }

            /* classes para anima√ß√µes de lotties */
            #single-container .lottie-anim{
                margin: auto;
            }
            #single-container .lottie-size-80-desktop, #single-container .lottie-size-80{
                width: 80%;
            }
            #single-container .lottie-size-70-desktop, #single-container .lottie-size-70{
                width: 70%;
            }
            #single-container .lottie-size-60-desktop, #single-container .lottie-size-60{
                width: 60%;
            }
            #single-container .lottie-size-50-desktop, #single-container .lottie-size-50{
                width: 50%;
            }
            #single-container .lottie-size-40-desktop, #single-container .lottie-size-40{
                width: 40%;
            }
            #single-container .lottie-size-30-desktop, #single-container .lottie-size-30{
                width: 30%;
            }
            #single-container .lottie-size-20-desktop, #single-container .lottie-size-20{
                width: 20%;
            }

            /* classes utils */
            #single-container .hide-desktop{
                display: none;
            }

            #single-container .youtube-player {
                width: 100%;
                /* Or set a specific width */
                height: auto;
                aspect-ratio: 16 / 9;
                margin-bottom: 6vw;
                display: flex;
                justify-content: center;
                align-items: center;
                background-color: black;
            }

            /* Este arquivo cont√©m os estilos espec√≠ficos apenas de layout dos artigos do site */

            /***********************************************************************************************
            Flexbox Layout
            ***********************************************************************************************/
            #single-container ._flex{
                display: flex;
                gap: 10px;
                justify-content: center;
                align-items: center;
            }
            #single-container ._flex_BREAK{
                flex-wrap: wrap;
            }
            #single-container ._flex_H{flex-direction: row;}
            #single-container ._flex_H_REVERSE{flex-direction: row-reverse;}
            #single-container ._flex_H_LEFT{justify-content: left !important;}
            #single-container ._flex_H_RIGHT{justify-content: right !important;}

            #single-container ._flex_V{flex-direction: column;}
            #single-container ._flex_V_REVERSE{flex-direction: column-reverse;}
            #single-container ._flex_V_LEFT{align-items: start !important;}
            #single-container ._flex_V_RIGHT{align-items: right !important;}


            /***********************************************************************************************
            Grid Layout
            ***********************************************************************************************/
            #single-container ._grid{
                display: grid;
                gap: 10px;
            }
            #single-container ._grid_CENTER{
                justify-content: center;
                align-items: center;
            }
            #single-container ._2_cols_grid_A, #single-container ._2_cols_grid_A_FIXED{
                grid-template-columns: 1fr 1fr;
            }

            #single-container ._2_cols_grid_B, #single-container ._2_cols_grid_B_FIXED{
                grid-template-columns: 1fr 2fr;
            }
            #single-container ._2_cols_grid_C, #single-container ._2_cols_grid_C_FIXED{
                grid-template-columns: 2fr 1fr;
            }
            #single-container ._3_cols_grid_A, #single-container ._3_cols_grid_A_FIXED{
                grid-template-columns: 1fr 1fr 1fr;
            }
            #single-container ._3_cols_grid_B_FIXED{
                grid-template-columns: 1fr auto 1fr;
            }
            #single-container ._4_cols_grid_A{
                grid-template-columns: repeat(4, auto);
            }
            #single-container ._5_cols_grid_C, ._5_cols_grid_C_FIXED{
                grid-template-columns: repeat(5, auto);
            }

            /** subcomponents **/
            #single-container ._grid p, ._flex p{
                margin: 0;
            }

            /***********************************************************************************************
            Grid & Flexbox Layout
            ***********************************************************************************************/
            #single-container ._GAP-0{
                gap: 0;
            }

            /***********************************************************************************************
            Estilos
            ***********************************************************************************************/
            #single-container ._frame_A{
                border-width: 1px;
                border-radius: 10px;
                border-style: solid;
                border-color: black;
                padding: 5px;
                padding-bottom: 20px;
            }
            #single-container ._frame_B{
                border-width: 1px;
                border-radius: 0px;
                border-style: solid;
                border-color: black;
                padding: 5px;
                background-color: #ebebeb;
            }

            @media (max-width:${MOBILE_BREAKPOINT}){
                /***********************************************************************************************
                Flexbox Layout
                ***********************************************************************************************/
                #single-container ._flex{
                    gap: 2vw;
                }

                /***********************************************************************************************
                Grid Layout
                ***********************************************************************************************/
                #single-container ._grid{
                    grid-template-columns:  1fr;
                    gap: 2vw;
                }
                #single-container ._2_cols_grid_A_FIXED{
                    grid-template-columns: 1fr 1fr;
                }
                #single-container ._2_cols_grid_B_FIXED{
                    grid-template-columns: 1fr 2fr;
                }
                #single-container ._2_cols_grid_C_FIXED{
                    grid-template-columns: 2fr 1fr;
                }
                #single-container ._3_cols_grid_A_FIXED{
                    grid-template-columns:  1fr 1fr 1fr;
                }
                #single-container ._3_cols_grid_B_FIXED{
                    grid-template-columns: 1fr auto 1fr;
                }
                #single-container ._4_cols_grid_A{
                    grid-template-columns: repeat(2, auto);
                }
                #single-container ._5_cols_grid_C_FIXED{
                    grid-template-columns: repeat(5, auto);
                }
                
                /** subcomponents **/


                /***********************************************************************************************
                Grid & Flexbox Layout
                ***********************************************************************************************/


                /***********************************************************************************************
                Estilos
                ***********************************************************************************************/
                #single-container ._frame_A{
                    border-width: 0.1vw;
                    border-radius: 1.8vw;
                    padding: 1vw;
                    padding-bottom: 4vw;
                }
            }
        `);

        if (!cachedPostsHtml)
            this.loadData();
    }

    /** @override */
    async loadData() {
        const div = document.getElementById('single-container');
        if (!div) return;

        try {

            const response = await fetch(`/api/single${window.location.pathname}`);
            const artigo = await response.json();


            const content = this.processSingleContent(artigo.content); // faz substitui√ß√µes de tags marcadas no artigo

            let stringHtml = `
                <algol-grid-layout posh="stretch" cols="1fr">
                    <algol-grid-item
                    img="${IMAGE_BUCKET}${artigo.featured_image_url}"
                    padding="15vw 5vw"
                    paddingbreak="30vw 5vw"
                    imgrepeat="no-repeat"
                    imgsize="cover"
                    imgpos="right"
                    imgoverlay="0.6"
                    posh="stretch">
                        <h2 style="text-align: center; color: white; text-shadow: 0 calc(0.1vw * var(--scale-factor)) calc(0.1vw * var(--scale-factor)) black;">${artigo.title}</h2>
                        <algol-spacer value="1.5"></algol-spacer>
                        <p style="text-align: center; color: white;">${artigo.excerpt}</p>
                        <algol-spacer value="1.5"></algol-spacer>
                        <p style="text-align: center; color: white;">${artigo.date}</p>
                    </algol-grid-item>

                    <algol-grid-item id="single-container">
                        ${content}
                    </algol-grid-item>
                </algol-grid-layout>
            `;

            div.outerHTML = stringHtml; // substitui a div pelo <algol-grid-layout>

        } catch (error) {
            console.error("Erro ao carregar artigos:", error);
            div.innerHTML = "<p>Erro ao carregar conte√∫dos.</p>";
        }
    }

    processSingleContent(rawContent) {
        if (!rawContent) return '';

        // Substitui todas as ocorr√™ncias de [[[filebucket]]] pelo dom√≠nio das imagens
        let processedContent = rawContent.replaceAll('[[[filebucket]]]', IMAGE_BUCKET);
        // Substitui√ß√£o do Domain
        processedContent = processedContent.replaceAll('[[[domain]]]', window.location.origin);

        return processedContent;
    }

}

// ====================================
// üìÅ ./public\js\pages\_base.js
// ====================================
/** Classe base de uma p√°gina SPA */
class PageBase {

    constructor(container) {
        this.container = container; // container alvo da renderiza√ß√£o
    }

    /** @abstract */
    render() {
        throw "render() n√£o implementado";
    }
    
    /** @abstract */
    async loadData() {
        throw "loadData() n√£o implementado";
    }

    // M√©todo utilit√°rio para injetar CSS din√¢mico
    injectStyle(cssString) {
        const style = document.createElement('style');
        style.id = 'dynamic-page-style'; // Mesmo ID que o roteador vai procurar para apagar
        style.textContent = cssString;
        document.head.appendChild(style);
    }
}

// ====================================
// üìÅ ./public\js\router.js
// ====================================
// identifica a a classe da p√°gina associada a cada rota
const urlRoutes = {
    "/": PageHome,
    "/posts": PagePosts,
    "/publications": PagePublications,
    "/courses": PageCourses,
    404: Page404,
};

// fun√ß√£o de roteamento (invocada pelos links do menu)
const route = (event) =>{
    event.preventDefault(); // impede recarregar a p√°gina
    window.history.pushState({},"",event.currentTarget.href); // atualiza a URL com base na op√ß√£o que voi clicada
    handleLocation(); // handleLocation ser√° a fun√ß√£o que troca o conte√∫do
}

/** fun√ß√£o que gerencia a mudan√ßa din√¢mica de conte√∫do */
const spa_container = document.getElementById('spa-container');
const handleLocation = async () => {
    const path = window.location.pathname; // captura o caminho da url
    let pageClass = urlRoutes[path]; // seleciona a classe(p√°gina), com base na rota
    let slug = null;

    // Se a rota n√£o existir no dicion√°rio, assumimos que √© uma p√°gina Single (rota din√¢mica na raiz)
    if (!pageClass) {
        // Remove a primeira barra para extrair o slug (ex: "/java-linguagem" -> "java-linguagem")
        slug = path.substring(1);
        // Evita erro caso o path seja apenas uma barra solta ou algo bizarro n√£o mapeado
        if (slug.length > 0) {
            pageClass = PageSingle; // Direciona para a p√°gina do post
        } else {
            pageClass = urlRoutes[404];
        }
    }

    // Remove o estilo da p√°gina anterior, se existir ---
    const oldStyle = document.getElementById('dynamic-page-style');
    if (oldStyle) {
        oldStyle.remove();
    }

    const page = new pageClass(spa_container) // instancia a classe da p√°gina da rota atual
    page.render(); // invoca a fun√ßao de renderiza√ß√£o da p√°gina
}

window.onpopstate = handleLocation; // para quando o usu√°rio usar os bot√µes de avan√ßar e voltar
window.route = route; // Exp√µe a fun√ß√£o route no escopo global para que os onclick="route(event)" funcionem
handleLocation(); // Garante que a rota inicial seja processada no carregamento

